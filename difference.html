<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Age Calculator</title>
    <link rel="stylesheet" href="display.css">
    <script src="https://kit.fontawesome.com/3df9dd8881.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="sidebar.css">

    <style>
        /* Style the form container */
        .form__display {
            width: 300px;
            margin: 0 auto;
            text-align: center;
            padding: 5px 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f5f5f5;
        }

        #form #opd {
            display: flex;
        }

        #form #opd div {
            margin: 0 3px;
        }

        /* Style the form elements */
        .form__display label {
            display: block;
            margin: 10px 0;
        }

        .form__display select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .form__display option {
            text-transform: capitalize;
        }

        .form__display button[type="submit"] {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }


        header i {
            font-size: 24px;
            margin-right: 10px;
        }

        /* Style the output display container */
        .output_display {
            width: 300px;
            margin: 20px auto;
            text-align: center;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f5f5f5;
            display: none;
        }

        .output_display #odd {
            display: flex;
            /* margin: 0 5px; */
        }

        .output_display div {
            margin: 0 5px;
        }

        /* Style the labels for years, months, and days */
        .output_display label {
            display: block;
            margin: 10px 0;
            font-weight: bold;
        }

        /* Style the input fields for displaying the calculated values */
        .output_display input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #o_d_p{
            text-transform: capitalize;
            margin: 3px;
        }
        #o_d_p1{
            display: none;
            margin: auto;
            font-size:20px;
            border-redious: 10px;
            background-color: #f5f5f5;
            padding:10px;
            width:300px;
        }
        select{
            text-transform: capitalize;
        }
        #odd input{
            text-align: center;
            font-size: 20px;
        }
        #null{
            display:none;
        }
        #Null{
            display:none;
        }
    </style>


</head>

<body id="body1">
    <header>
        <i class="fa-solid fa-angle-left"></i>
        <p>Raman Kumar</p>
        <div>
            <button onclick="reform();" id="Addbtn">+</button>
        </div>
    </header>
    <div id="body2">

        <div class="form__display">
            <div id="form">
                <div id="opd">
                    <div>
                        <label for="">Person 1</label>
                        <select name="" id="person1">
                            <option value="">Select</option>
                        </select>
                    </div>
                    <div>
                        <label for="">Person 2</label>
                        <select name="" id="person2">
                            <option value="">Select</option>
                        </select>
                    </div>
                </div>
                <div>
                    <button id="calulate_btn" type="submit">Calulate</button>
                </div>
            </div>
        </div>
<p id="o_d_p1"></p>

        <div class="output_display">
            <p id="o_d_p">Raman And Tarun Lohar</p>
            <div id="odd">
                <div>
                    <label for="">Years</label>
                    <input id="outy" type="text" readonly>
                </div>
                <div>
                    <label for="">Months</label>
                    <input id="outm" type="text" readonly>
                </div>
                <div>
                    <label for="">Days</label>
                    <input id="outd" type="text" readonly>
                </div>
            </div>
        </div>

        <footer>
            <br>
            <h6>Age Calculator Created By Raman Kumar</h6>
            <br>
        </footer>
    </div>
</body>
<script src="difference.js"></script>
<script src="display.js"></script>
<script>
    // Retrieve the number of forms and names from localStorage
    const form_no = localStorage.getItem("Form_NO");

    // Loop through and populate the <select> elements
    for (let i = 1; i <= form_no; i++) {
        const names = localStorage.getItem(`Name${i}`);
        const selectElements = document.querySelectorAll("select");

        selectElements.forEach((select) => {
            const option = document.createElement("option");
            option.value = i;
            option.text = names;
            option.id = names;
            select.appendChild(option);
        });
    }
    const calulate_btn = document.querySelector("#calulate_btn")
    calulate_btn.addEventListener("click", () => {

        const output_display = document.querySelector(".output_display")
        output_display.style.display = "block"

        const sponev = document.querySelector("#person1").value;
        const sptwov = document.querySelector("#person2").value;
        const o_d_p = document.querySelector("#o_d_p")
        const o_d_p1 = document.querySelector("#o_d_p1")
        o_d_p1.style.display = "none"
        
        i = sponev
        j = sptwov

        if(sponev==sptwov || sponev=="" || sptwov==""){
           o_d_p1.innerHTML = "Please Select Different Person" 
            o_d_p1.style.display = "block"
            output_display.style.display = "none"
        }


        const name1 = localStorage.getItem("Name" + i);
        const DD1 = localStorage.getItem("DD" + i);
        const MM1 = localStorage.getItem("MM" + i);
        const YYYY1 = localStorage.getItem("YYYY" + i);

        const name2 = localStorage.getItem("Name" + j);
        const DD2 = localStorage.getItem("DD" + j);
        const MM2 = localStorage.getItem("MM" + j);
        const YYYY2 = localStorage.getItem("YYYY" + j);

        let Outy, Outm, Outd;

        if (YYYY1 < YYYY2) {
            Outy = YYYY2 - YYYY1
            Outm = MM2 - MM1
            Outd = DD2 - DD1
        }
        else if (YYYY1 == YYYY2) {
            if (MM1 < MM2) {
                Outy = YYYY2 - YYYY1
                Outm = MM2 - MM1
                Outd = DD2 - DD1
            }
            else if (MM1 == MM2) {
                if (DD1 < DD2) {
                    Outy = YYYY2 - YYYY1
                    Outm = MM2 - MM1
                    Outd = DD2 - DD1
                }
                else if (DD1 == DD2) {
                    //age is Same
                    Outy = YYYY2 - YYYY1
                    Outm = MM2 - MM1
                    Outd = DD2 - DD1
                }
                else {
                    Outy = YYYY1 - YYYY2
                    Outm = MM1 - MM2
                    Outd = DD1 - DD2
                }
            }
            else {
                Outy = YYYY1 - YYYY2
                Outm = MM1 - MM2
                Outd = DD1 - DD2
            }
        }
        else {
            Outy = YYYY1 - YYYY2
            Outm = MM1 - MM2
            Outd = DD1 - DD2
        }


        if (Outd < 0) {
            Outm -= 1;
            Outd += 30;
        }
        if (Outm < 0) {
            Outy -= 1;
            Outm += 12;
        }

        if (Outm < 10) {
            Outm = "0" + Outm;
        }
        if (Outd < 10) {
            Outd = "0" + Outd;
        }
        if (Outy < 10) {
            Outy = "0" + Outy;
        }


        
        o_d_p.innerHTML = `The Difference In Age Of ${name1} And ${name2} Is`
        document.querySelector("#outy").value = Outy
        document.querySelector("#outm").value = Outm
        document.querySelector("#outd").value = Outd

    })

    const back = document.querySelector("i")
    back.addEventListener("click",()=>{
        window.location.href = "display.html"
    })
</script>


</html>
